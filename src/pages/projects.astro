---
import Layout from '../layouts/Layout.astro';
import { getRepos } from '../lib/github';
import ProjectCard from '../components/ProjectCard.astro'; // Assuming you have this component

// Fetch the data at build time!
const allProjects = await getRepos();
---

<Layout title="My Projects">
    <section class="py-16">
        <div class="max-w-4xl mx-auto text-center">
            <h1 class="text-4xl font-bold mb-4">Check Out My Projects</h1>
            <p class="text-gray-400 mb-12">
                Here's a selection of projects I've been working on recently.
            </p>
        </div>

        <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Loop over the fetched projects and render a card for each one -->
            {allProjects.map(project => (
                <ProjectCard repo={project} />
            ))}
        </div>
    </section>
</Layout>